# PROJEKT EIDOLON - Asystent AI o Rozszerzonej PamiÄ™ci

# Klon ChatGPT dziaÅ‚ajÄ…cy w przeglÄ…darce z WebLLM i IndexedDB

## OPIS PROJEKTU

Eidolon to aplikacja webowa bÄ™dÄ…ca klonem ChatGPT, ktÃ³ra dziaÅ‚a w 100% lokalnie w przeglÄ…darce.
Wykorzystuje WebLLM dla modelu AI i IndexedDB dla trwaÅ‚ej pamiÄ™ci, zapewniajÄ…c prywatnoÅ›Ä‡,
darmowe uÅ¼ytkowanie i pracÄ™ offline.

## KONWENCJE KODOWANIA

### JÄ™zyk

- **TYLKO ANGIELSKI** w kodzie - wszystkie nazwy zmiennych, funkcji, komentarze, stringi
- Interfejs uÅ¼ytkownika moÅ¼e byÄ‡ po polsku, ale kod tylko po angielsku
- Konsystentna nomenclatura w caÅ‚ym projekcie

### TypeScript

- ÅšcisÅ‚e typowanie (strict mode)
- Interfejsy dla wszystkich struktur danych
- Enums dla staÅ‚ych wartoÅ›ci
- Generic types gdzie moÅ¼liwe

### React

- Functional components + hooks
- Custom hooks dla logiki biznesowej
- Proper error boundaries
- Lazy loading dla duÅ¼ych komponentÃ³w

### Styling

- Tailwind CSS classes
- Shadcn/ui components jako baza
- CSS modules dla custom stylÃ³w
- Mobile-first approach

### Struktura PlikÃ³w

- Jeden komponent na plik
- Index.ts dla Å‚atwego importowania
- Separacja logiki biznesowej od UI
- WspÃ³Å‚dzielone typy w types/

## STOS TECHNOLOGICZNY

- **Frontend**: Vite + React 18 + TypeScript
- **UI Library**: Shadcn/ui + Tailwind CSS
- **Routing**: react-router-dom
- **Lokalne AI**: @mlc-ai/web-llm
- **Baza Danych**: Dexie.js (wrapper na IndexedDB)
- **Backend**: Firebase (auth, sync, backup)
- **ObsÅ‚uga PDF**: pdf.js (opcjonalnie)
- **PodÅ›wietlanie SkÅ‚adni**: react-syntax-highlighter (opcjonalnie)

## ARCHITEKTURA BAZY DANYCH (IndexedDB przez Dexie.js)

### Tabela: conversations

- id: number (primary key, auto-increment)
- title: string (tytuÅ‚ rozmowy)
- createdAt: Date
- updatedAt: Date
- isPinned?: boolean
- userId?: string (dla zalogowanych uÅ¼ytkownikÃ³w)

### Tabela: messages

- id: number (primary key, auto-increment)
- conversationId: number (foreign key, indexed)
- role: 'user' | 'assistant'
- content: string
- createdAt: Date
- parentId?: number (dla Chat Branching)

### Tabela: documents

- id: number (primary key, auto-increment)
- filename: string
- content: string
- createdAt: Date
- fileType: 'txt' | 'md' | 'pdf'

### Tabela: users (przyszÅ‚oÅ›Ä‡)

- id: string (firebase uid)
- email: string
- displayName: string
- createdAt: Date
- plan: 'free' | 'pro'

## ROUTING I NAWIGACJA

### URL Structure

- `/` - gÅ‚Ã³wna strona z welcome screen
- `/chat/:conversationId` - konkretna rozmowa (bez hasha!)
- `/chat/:userId/:conversationId` - rozmowa zalogowanego uÅ¼ytkownika (przyszÅ‚oÅ›Ä‡)
- `/settings` - ustawienia
- `/auth` - logowanie/rejestracja

### Nawigacja

- UÅ¼ywaj react-router-dom navigate(), NIE window.location.hash
- Programatyczna nawigacja, nie linki z href
- Animacje przejÅ›Ä‡ miÄ™dzy chatami

## CHAT MANAGEMENT

### Operacje na Chatach

- **Filter/Search** - filtrowanie po tytule i zawartoÅ›ci
- **Pin/Unpin** - przypinanie waÅ¼nych rozmÃ³w
- **Rename** - zmiana tytuÅ‚u rozmowy
- **Delete** - usuwanie z konfirmacjÄ…
- **Archive** - archiwizacja starych rozmÃ³w
- **Export** - eksport do JSON/PDF

### Chat Operations Menu

- 3-dot menu on hover dla kaÅ¼dego chatu
- Opcje: Pin, Rename, Delete, Archive, Export
- Keyboard shortcuts dla power users
- Bulk operations dla wielu chatÃ³w

## PLAN ROZWOJU - FAZA PO FAZIE

### FAZA 1: Podstawowa Konfiguracja Projektu âœ…

**Cel**: Przygotowanie Å›rodowiska i podstawowej struktury

### FAZA 2: Lokalna Baza Danych âœ…

**Cel**: Implementacja IndexedDB z Dexie.js

### FAZA 3: Podstawowy Interfejs UÅ¼ytkownika âœ…

**Cel**: Stworzenie responsywnego UI bez AI

### FAZA 4: Integracja z WebLLM âœ…

**Cel**: PoÅ‚Ä…czenie z lokalnym modelem AI

### FAZA 5: MVP - Podstawowa FunkcjonalnoÅ›Ä‡ Czatu âœ…

**Cel**: DziaÅ‚ajÄ…cy chat z trwaÅ‚Ä… pamiÄ™ciÄ…

### FAZA 6: Chat Management & UX â³

**Cel**: Zaawansowane zarzÄ…dzanie chatami

**Kroki**:

1. Animacje sidebar (slide in/out)
2. Chat filtering i search
3. 3-dot menu z opcjami
4. Proper routing bez hashÃ³w
5. Keyboard shortcuts
6. Bulk operations

### FAZA 7: ObsÅ‚uga ZaÅ‚Ä…cznikÃ³w

**Cel**: Upload i przetwarzanie plikÃ³w .txt i .md

### FAZA 8: Firebase Integration

**Cel**: Authentication i cloud backup

**Kroki**:

1. Firebase setup (auth, firestore)
2. User authentication
3. Cloud backup rozmÃ³w
4. Multi-device sync
5. Sharing conversations

### FAZA 9: WebLLM Integration

**Cel**: Prawdziwe lokalne AI

### FAZA 10: Stretch Goals

**Cel**: Zaawansowane funkcje

## KLUCZOWE KOMPONENTY DO IMPLEMENTACJI

### 1. ChatInterface

```typescript
interface ChatInterfaceProps {
  conversationId?: string;
  userId?: string;
}
```

### 2. ConversationManager

```typescript
interface ConversationOperations {
  filterConversations: (query: string) => Conversation[];
  pinConversation: (id: number) => Promise<void>;
  renameConversation: (id: number, title: string) => Promise<void>;
  deleteConversation: (id: number) => Promise<void>;
  archiveConversation: (id: number) => Promise<void>;
}
```

### 3. ChatContextMenu

```typescript
interface ChatContextMenuProps {
  conversation: Conversation;
  onPin: () => void;
  onRename: () => void;
  onDelete: () => void;
  onArchive: () => void;
}
```

## METRYKI SUKCESU MVP

- [ ] UÅ¼ytkownik moÅ¼e napisaÄ‡ wiadomoÅ›Ä‡ i otrzymaÄ‡ odpowiedÅº
- [ ] Historia rozmÃ³w jest zachowana po odÅ›wieÅ¼eniu
- [ ] MoÅ¼na tworzyÄ‡ nowe rozmowy
- [ ] MoÅ¼na zaÅ‚Ä…czyÄ‡ plik .txt/.md i AI odpowiada na jego podstawie
- [ ] UI jest responsywne i profesjonalne
- [ ] Aplikacja dziaÅ‚a offline
- [ ] Smooth animations i transitions
- [ ] Chat filtering i search
- [ ] Chat management (pin, rename, delete)

## TESTOWANIE

- Unit testy dla funkcji utilsowych
- Integration testy dla bazy danych
- E2E testy dla kluczowych przepÅ‚ywÃ³w
- Performance testy dla WebLLM

## DEPLOYMENT

- Build statyczny przez Vite
- Hosting na GitHub Pages / Netlify / Vercel
- Service Worker dla offline functionality
- PWA manifest dla instalacji

## UWAGI DLA DEVELOPERA

1. Rozpocznij od FAZY 1-2, upewnij siÄ™ Å¼e baza danych dziaÅ‚a
2. UI rÃ³b rÃ³wnolegle z logikÄ… - nie czekaj na kompletnÄ… implementacjÄ™
3. WebLLM wymaga duÅ¼o RAM - testuj na rÃ³Å¼nych urzÄ…dzeniach
4. IndexedDB ma limity - dodaj sprawdzanie rozmiaru
5. Pliki moÅ¼na cachowaÄ‡ w IndexedDB jako blob
6. UÅ¼ywaj lazy loading dla duÅ¼ych komponentÃ³w
7. Optymalizuj bundle size - WebLLM jest duÅ¼y
8. Wszystkie stringi w kodzie PO ANGIELSKU!
9. Smooth animations wszÄ™dzie gdzie moÅ¼na
10. Keyboard shortcuts dla power users

## KOLEJNOÅšÄ† IMPLEMENTACJI

1. âœ… Setup projektu + Shadcn/ui
2. âœ… Baza danych (Dexie.js)
3. âœ… Podstawowy UI (bez AI)
4. âœ… WebLLM integration
5. âœ… TrwaÅ‚a pamiÄ™Ä‡ rozmÃ³w
6. â³ Chat management + animations
7. ğŸ“‹ ObsÅ‚uga zaÅ‚Ä…cznikÃ³w (.txt/.md)
8. ğŸ“‹ Firebase integration
9. ğŸ“‹ WebLLM integration
10. ğŸ“‹ Stretch goals (PDF, branching, etc.)

To jest Twoja mapa drogowa. Aktualnie pracujemy nad FAZÄ„ 6!
